Session Traversal Utilities for NAT
P2P互连穿透服务。

与标准STUN稍有不同，仅支持单ip。
与另一个stun-serv协作完成来源NAT端口侦测（Full Cone）。


名称简写
--------
	FullC   Full Cone 完全圆锥型，任意IP和Port（IP+, Port+）
	RC	  Restricted Cone 受限圆锥型（=IP, Port+）
	P-RC	Port Restricted Cone 端口受限圆锥型（=IP, =Port）
	SYN	 Symmetric NAT

可连接性
--------
	1. FullC <- xx
	接受任意来源，类似公网端。知道IP和Port即可等同公网端。
	注：数量极少。

	2. RC（+IP） <- xx
	向目标IP发送数据包（打洞）后，接受目标IP来源。适用SYN来源。

	3. P-RC（+IP, +Port） <- xx（-SYN）
	向目标IP和Port发送数据包后，接受目标准确来源。因此对SYN无效。
	注：
	暂不考虑对SYN端预测性端口打洞。

	4. SYN -> xx
	仅对外连接。可连接至 FullC，RC（预打洞）类型端。
	这样的端点无法成为服务网络里的主机，通常是应用级启动的外联信息收集端。


请求类型
--------
	1. STUN:BaseBoth
	初始基本信息，包含IP和端口。
	由原始的连接返回客户端，用于直接获取客户端公网IP和端口。

	2. STUN:NewPort
	用一个新的端口返还信息。信息包由客户端创建，包含识别ID。
	用于侦测客户端是RC类型还是P-RC类型：
	- 收到为RC类型
	- 未收到为P-RC类型

	3. STUN:NewHost
	请求用一个新的主机发送信息，侦测客户端是否为FullC类型（收到即是）。
	信息包同上，由客户端创建。
	新的主机任意选择，服务端通常挑选连接池中的P-RC类型来用（其开放服务能力最弱）。
	注：
	通常不会选择FullC，一是浪费资源，二也为避免碰巧选到曾与客户端连接过的服务器（如下面说的B）。


信息包
------
	1. 开放地址
	   最后NAT映射的公网IP和端口。

	2. 局端地址
	   客户端本地内网IP和端口。
	   可能包含第二组本地家庭网关所在外网的IP地址和端口（注：可通过UPnP方式获取）。

	3. 随机标识ID。4字节毫秒时间段 + 4字节随机整数。
	   连接尝试：
	   如果局端地址与本地网络相同，尝试连接并请求标识ID。
	   真同网则可成功，否则肯定失败。

	4. 打洞指令....


客户端
------
	1. 
	向A，B两个服务端发送STUN:BaseBoth侦测请求，检查返回的两个值中端口是否相同。
	不同则为SYN类型，无需进一步努力。

	2.
	向A（或B）服务端发送STUN:NewPort请求，侦测自己是否为RC或FullC类型。
	未收到回复则为P-RC类型，无需进一步询问（是否更好）。

	3.
	若在第2步收到回应，则检测是否更好：向A（或B）服务端发送STUN:NewHost请求。
	若收到回应，则为FullC类型（最好），否则为RC类型（还行）。

	此步骤顺序有较好的综合效率。
